# Disk Mapper (Android)

MVP-приложение для Android, чтобы находить самые тяжелые файлы/папки и удалять ненужное.

## Что умеет
- Выбор папки через системный диалог (`Storage Access Framework`)
- Режим `Root scan` для `/storage/emulated/0` (через `All files access`)
- Режим `Shizuku Android/` для сканирования `Android/data` и `Android/obb`
- Рекурсивное сканирование выбранной директории
- Сортировка по расходу места на диске (сверху самые тяжелые)
- Фильтры: `All`, `Telegram`, `Videos`, `Archives`, `Installers`
- Удаление файлов из списка
- Повторный скан и отображение прогресса (`visited nodes`)
- Два размера:
  - `Logical` - фактический размер файла
  - `On-disk est` - оценка занимаемого места с учетом кластера (4 KB)

## Почему SAF
Приложение не требует опасного разрешения `MANAGE_EXTERNAL_STORAGE`. Доступ ограничен только тем деревом, которое ты сам выбрал.

## Запуск
1. Открой `DiskMapperAndroid` в Android Studio (Hedgehog+).
2. Дождись sync Gradle.
3. Запусти на устройстве с Android 8.0+.
4. Нажми `Select folder` и выбери, например, `Download`.

## Ограничения MVP
- Нет treemap-визуализации (пока список).
- Удаление папок отключено намеренно (для безопасности).
- При очень больших деревьях скан может занять время.
- Для `Shizuku Android/` нужно:
  1. Установить и запустить Shizuku.
  2. При первом запуске режима подтвердить доступ для приложения.
  3. После выдачи доступа нажать `Shizuku Android/` еще раз.

## Следующие улучшения
- Treemap (интерактивные плитки по размеру)
- Пакетное удаление (multi-select)
- Исключения по паттернам (`Android/data`, кэш-маски)
- "Сухой" режим очистки (показать что удалится)

## CI build on GitHub

После каждого push/PR в `main` запускается workflow:
- `.github/workflows/android-ci.yml`

Готовый debug APK доступен в GitHub Actions как artifact `app-debug`.
